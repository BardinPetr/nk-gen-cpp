{% autoescape true %}

{% import "method.jinja" as method %}
{% import "idl.jinja" as idl %}

/*
 * Generated by NK-CPP
 */

#include <spdlog/spdlog.h>

#include "{{ cls }}.idl.hpp"

{{ ns }}::{{ cls }}::{{ cls }}(NkKosTransport *transport, nk_iid_t riid) : transport(transport), riid(riid) {
}

{{ ns }}::{{ cls }}::{{ cls }}(NkKosTransport *transport, const char *endpoint_name) : transport(transport) {
    riid = ServiceLocatorGetRiid(transport->handle, endpoint_name);
    if (INVALID_RIID == riid) {
        spdlog::error("Service RIID {} not found", endpoint_name);
    }
}

{% for m in methods %}
    {{ method.method_impl(ns, cls, m.name, m.arg_in, "const {}*".format(m.res_type), idl.proxy(m)) }}
{% endfor %}

{% endautoescape%}